//三段式状态机
module money(input rmb1,rmb5,rmb10
             input clk,
				 input reset,
				 output [4：0] a);
typedef enum logic [4:0] {S0=4'd0,S1=4'd1,S2=4'd2,S3=4'd3,S4=4'd4,S5=4'd5,S6=4'd6,S7=4'd7,
                          S8=4'd8,S9=4'd9,S10=4'd10,S11=4'd11,S12=4'd12,S13=4'd13,S14=4'd14,S15=4'd15,
								  S16=4'd16,S17=4'd17,S18=4'd18,S19=4'd19,S20=4'd20,S21=4'd21,S22=4'd22,S23=4'd23,
								  S24=4'd24,S25=4'd25,S26=4'd26,S27=4'd27,S28=4'd28,S29=4'd29,S30=4'd30,S31=4'd31,} statetype;
statetype state,nextstate;				 
always_ff@(posedge clk,posedge reset)
    if(reset) state <= S0;
	 else state <= nextstate;

always_comb begin 
    if(reset == 1)
		      nextstate = S0;
	 else
	 case(state)
	 S0:begin
	     if(rmb1 == 1'b1)
		      nextstate = S1;
		  else if(rmb5 == 1'b1)
		       nextstate = S5;
		  else if(rmb10 == 1'b1)
		       nextstate = S10;
		  else 
		       nextstate = S0;
	 end
	 S1:begin
	     if(rmb1 == 1'b1)
		      nextstate = S2;
		  else if(rmb5 == 1'b1)
		       nextstate = S6;
		  else if(rmb10 == 1'b1)
		       nextstate = S11;
		  else 
		       nextstate = S1;
	 end
	 S2:begin
	     if(rmb1 == 1'b1)
		      nextstate = S3;
		  else if(rmb5 == 1'b1)
		       nextstate = S7;
		  else if(rmb10 == 1'b1)
		       nextstate = S12;
		  else 
		       nextstate = S2;
	 end
	 S3:begin
	     if(rmb1 == 1'b1)
		      nextstate = S4;
		  else if(rmb5 == 1'b1)
		       nextstate = S8;
		  else if(rmb10 == 1'b1)
		       nextstate = S13;
		  else 
		       nextstate = S3;
	 end
	 S4:begin
	     if(rmb1 == 1'b1)
		      nextstate = S5;
		  else if(rmb5 == 1'b1)
		       nextstate = S9;
		  else if(rmb10 == 1'b1)
		       nextstate = S14;
		  else 
		       nextstate = S4;
	 end
	 S5:begin
	     if(rmb1 == 1'b1)
		      nextstate = S6;
		  else if(rmb5 == 1'b1)
		       nextstate = S10;
		  else if(rmb10 == 1'b1)
		       nextstate = S15;
		  else 
		       nextstate = S5;
	 end
	 S6:begin
	     if(rmb1 == 1'b1)
		      nextstate = S7;
		  else if(rmb5 == 1'b1)
		       nextstate = S11;
		  else if(rmb10 == 1'b1)
		       nextstate = S16;
		  else 
		       nextstate = S6;
	 end
	 S7:begin
	     if(rmb1 == 1'b1)
		      nextstate = S8;
		  else if(rmb5 == 1'b1)
		       nextstate = S12;
		  else if(rmb10 == 1'b1)
		       nextstate = S17;
		  else 
		       nextstate = S7;
	 end
	 S8:begin
	     if(rmb1 == 1'b1)
		      nextstate = S9;
		  else if(rmb5 == 1'b1)
		       nextstate = S13;
		  else if(rmb10 == 1'b1)
		       nextstate = S18;
		  else 
		       nextstate = S0;
	 end
	 S9:begin
	     if(rmb1 == 1'b1)
		      nextstate = S10;
		  else if(rmb5 == 1'b1)
		       nextstate = S14;
		  else if(rmb10 == 1'b1)
		       nextstate = S19;
		  else 
		       nextstate = S0;
	 end
	 S10:begin
	     if(rmb1 == 1'b1)
		      nextstate = S11;
		  else if(rmb5 == 1'b1)
		       nextstate = S15;
		  else if(rmb10 == 1'b1)
		       nextstate = S20;
		  else 
		       nextstate = S0;
	 end
	 S11:begin
	     if(rmb1 == 1'b1)
		      nextstate = S12;
		  else if(rmb5 == 1'b1)
		       nextstate = S16;
		  else if(rmb10 == 1'b1)
		       nextstate = S21;
		  else 
		       nextstate = S0;
	 end
	 S12:begin
	     if(rmb1 == 1'b1)
		      nextstate = S13;
		  else if(rmb5 == 1'b1)
		       nextstate = S17;
		  else if(rmb10 == 1'b1)
		       nextstate = S22;
		  else 
		       nextstate = S0;
	 end
	 S13:begin
	     if(rmb1 == 1'b1)
		      nextstate = S14;
		  else if(rmb5 == 1'b1)
		       nextstate = S18;
		  else if(rmb10 == 1'b1)
		       nextstate = S23;
		  else 
		       nextstate = S0;
	 end
	 S14:begin
	     if(rmb1 == 1'b1)
		      nextstate = S15;
		  else if(rmb5 == 1'b1)
		       nextstate = S19;
		  else if(rmb10 == 1'b1)
		       nextstate = S24;
		  else 
		       nextstate = S0;
	 end
	 S15:begin
	     if(rmb1 == 1'b1)
		      nextstate = S16;
		  else if(rmb5 == 1'b1)
		       nextstate = S20;
		  else if(rmb10 == 1'b1)
		       nextstate = S25;
		  else 
		       nextstate = S0;
	 end
	 S16:begin
	     if(rmb1 == 1'b1)
		      nextstate = S17;
		  else if(rmb5 == 1'b1)
		       nextstate = S21;
		  else if(rmb10 == 1'b1)
		       nextstate = S26;
		  else 
		       nextstate = S0;
	 end
	 S17:begin
	     if(rmb1 == 1'b1)
		      nextstate = S18;
		  else if(rmb5 == 1'b1)
		       nextstate = S22;
		  else if(rmb10 == 1'b1)
		       nextstate = S27;
		  else 
		       nextstate = S0;
	 end
	 S18:begin
	     if(rmb1 == 1'b1)
		      nextstate = S19;
		  else if(rmb5 == 1'b1)
		       nextstate = S23;
		  else if(rmb10 == 1'b1)
		       nextstate = S28;
		  else 
		       nextstate = S0;
	 end
	 S19:begin
	     if(rmb1 == 1'b1)
		      nextstate = S20;
		  else if(rmb5 == 1'b1)
		       nextstate = S24;
		  else if(rmb10 == 1'b1)
		       nextstate = S29;
		  else 
		       nextstate = S0;
	 end
	 S20:begin
	     if(rmb1 == 1'b1)
		      nextstate = S21;
		  else if(rmb5 == 1'b1)
		       nextstate = S25;
		  else if(rmb10 == 1'b1)
		       nextstate = S30;
		  else 
		       nextstate = S0;
	 end
	 S21:begin
	     if(rmb1 == 1'b1)
		      nextstate = S22;
		  else if(rmb5 == 1'b1)
		       nextstate = S26;
		  else if(rmb10 == 1'b1)
		       nextstate = S31;
		  else 
		       nextstate = S0;
	 end
	 S22:begin
	     if(rmb1 == 1'b1)
		      nextstate = S23;
		  else if(rmb5 == 1'b1)
		       nextstate = S27;
		  else if(rmb10 == 1'b1)
		       nextstate = S22;
		  else 
		       nextstate = S0;
	 end
	 S23:begin
	     if(rmb1 == 1'b1)
		      nextstate = S24;
		  else if(rmb5 == 1'b1)
		       nextstate = S28;
		  else if(rmb10 == 1'b1)
		       nextstate = S23;
		  else 
		       nextstate = S0;
	 end
	 S24:begin
	     if(rmb1 == 1'b1)
		      nextstate = S25;
		  else if(rmb5 == 1'b1)
		       nextstate = S29;
		  else if(rmb10 == 1'b1)
		       nextstate = S24;
		  else 
		       nextstate = S0;
	 end
	 S25:begin
	     if(rmb1 == 1'b1)
		      nextstate = S26;
		  else if(rmb5 == 1'b1)
		       nextstate = S30;
		  else if(rmb10 == 1'b1)
		       nextstate = S25;
		  else 
		       nextstate = S0;
	 end
	 S26:begin
	     if(rmb1 == 1'b1)
		      nextstate = S27;
		  else if(rmb5 == 1'b1)
		       nextstate = S31;
		  else if(rmb10 == 1'b1)
		       nextstate = S26;
		  else 
		       nextstate = S0;
	 end
	 S27:begin
	     if(rmb1 == 1'b1)
		      nextstate = S28;
		  else if(rmb5 == 1'b1)
		       nextstate = S27;
		  else if(rmb10 == 1'b1)
		       nextstate = S27;
		  else 
		       nextstate = S0;
	 end
	 S28:begin
	     if(rmb1 == 1'b1)
		      nextstate = S29;
		  else if(rmb5 == 1'b1)
		       nextstate = S28;
		  else if(rmb10 == 1'b1)
		       nextstate = S28;
		  else 
		       nextstate = S0;
	 end
	 S29:begin
	     if(rmb1 == 1'b1)
		      nextstate = S30;
		  else if(rmb5 == 1'b1)
		       nextstate = S29;
		  else if(rmb10 == 1'b1)
		       nextstate = S29;
		  else 
		       nextstate = S0;
	 end
	 S30:begin
	     if(rmb1 == 1'b1)
		      nextstate = S31;
		  else if(rmb5 == 1'b1)
		       nextstate = S30;
		  else if(rmb10 == 1'b1)
		       nextstate = S30;
		  else 
		       nextstate = S0;
	 end
	 S31:begin
	     if(rmb1 == 1'b1)
		      nextstate = S31;
		  else if(rmb5 == 1'b1)
		       nextstate = S31;
		  else if(rmb10 == 1'b1)
		       nextstate = S31;
		  else 
		       nextstate = S0;
	 end
	 default:nextstate = S0;
	 endcase
end

assign a = state;
endmodule